*** Turn and Context management for Safe and Efficient Game State Extraction and Updates***

I would like to implement a few features that will allow turn tracking for the DM and safe and effective nested game state extraction and updates. To accomplish this I plan to implement the following:

* Turn Manager :
    The goal of the Turn Manager is to provide the necessary tools for the DM to progress a turn and keep structured context (messages) to allow the state extractor performing efficient and safe game state extraction and updates. During a turn, there might be nested sub-turns within the turn. The Turn Manager keeps track of the turns/sub-turns, initiatives, active characters, and the context (messages) that happened within the (sub-)turns. When each turn/sub-turn ends, the state extractor performs game state updates. To prevent duplicate updates to a single action, we want to include only the messages and the results of nested sub-turns specific to this turn/subturn in the context of the state extractor. 

    During a turn, the following might happen:
    (Turn Start)
    Alice: I swing my sword at Bob. (Declares action)
    DM: Does anyone want to perform a reaction? (Response Window to the action)
    (Bob either clicks a "yes" button through the frontend or reply directly)
    (Sub-turn Start)
    Bob: I will cast a shield. (Declares action)
    (Response window to reaction)
    DM: Bob, your shield blocks part of the attack, making you take 3 less damage from Alice. (resolve action)
    (Response window to reaction resolution)
    (Sub-turn ends, state extractor perform game state updates on sub-turn)
    (A continuing Response window to action)
    DM: Alice, your attack lands but was blocked partially,dealing 5-3=2 damage to Bob
    (Response window to action resolution)
    (Turn ends, state extractor perform game state updates on turn)

    A possible implementation is to keep a stack of messages/context. Once a turn/sub-turn ends, pop all messages belong to that turn/sub-turn and add a summary/modification generated by the state extractor. The turn manager should also provide tools for start and ending a turn/sub-turn 

* State Extractor:
    The state extractor extracts state updates based on the context/messages provided and outputs a dataclass that represents the updates. The current implementation only provides the final narration as context. However, we would like to update it's prompt so that it takes in the entire context that belongs to the turn/sub-turn. Other than the dataclasses for state updates it should also be allowed to output a "modification" that describes effects that will be carried over to the parent turn or across turns, just as the description mentioned above "your shield blocks part of the attack, making you take 3 less damage from Alice".



